<<include ../supportwcl/mypfwcfg.des>> # user specified values and framework parameters

# science module definitions
<<include ../modulewcl/modnamepat.wcl>>
<<include ../modulewcl/supercal/01-crosstalk-bias.wcl>>
<<include ../modulewcl/supercal/02-crosstalk-dflat.wcl>>
<<include ../modulewcl/supercal/03-mkbiascor.wcl>>
<<include ../modulewcl/supercal/04-mkdflatcor.wcl>>

# input exposure lists
<<include ../lists/20150204t0215/20150204t0215_dflat_exposures.list>>
<<include ../lists/20150204t0215/20150204t0215_bias_exposures.list>>

target_site = descmp2

reqnum = 1424     # jira id - used as part of a run's unique identification (run-based)
jira_id = DESOPS-1014  # parent id of reqnum's jira ticket (campaign-based)
label = supercal_20150204t0215    # human-readable label - can be anything
project = ACT
campaign = Y2N

pipeline = supercal
pipeprod = Y2Nstack    # eups stack name
pipever = 1.0.6+1      # eups stack version

unitname = 20150204t0215  # supercal's get a range date
tag = Y2N_PRECAL

ops_run_dir = ${project}/${pipeline}/${unitname}-r${reqnum}/p${attnum:2}
submit_run_dir = /local_scratch/refact/submit/${project}/${pipeline}/n${unitname}-r${reqnum}/p${attnum:2}

camera = D
nite = 20150204,20150205,20150206,20150207,20150208,20150209,20150210,20150211,20150212,20150213,20150214,20150215
photflag = 1
photflagvar = 1
ccdnum = 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62


# input calibration and config definitions
xtalkcoefffile = DECam_20130606.xtalk
pupilnite = null
bpmnite = 20140901t0928
bpmreq = 1190
bpmatt = 1
lintablenite = 20130624
lintablefile = lin_tbl_v0.4
hupdatefile = 20140709_DES_header_update.20140303

#blocklist = xtalk-bias, xtalk-dflat, mkcor
blocklist = mkcor

<block>
    <xtalk-bias>
        expnum = ${bias_expnum}
        divide_jobs_by = expnum
        modulelist = crosstalk-bias
        target_site = fermigrid-sl6-uptodate
    </xtalk-bias>
    <xtalk-dflat>
        expnum = ${dflat_expnum}
        divide_jobs_by = expnum
        modulelist = crosstalk-dflat
        target_site = fermigrid-sl6-uptodate
    </xtalk-dflat>
    <mkcor>
        divide_jobs_by = ccdnum
        modulelist = mkbiascor,mkdflatcor
        target_site = fermigrid-sl6-himem
    </mkcor>
</block>
