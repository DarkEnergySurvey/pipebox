# user specified parameters
<<include $PIPEBOX_WORK/config/{USER}_cfg.des>> 

# science module definitions
<<include {MYWCLDIR}/modulewcl/modnamepat.wcl>>
<<include {MYWCLDIR}/modulewcl/firstcut/01-crosstalk-sci.wcl>>
<<include {MYWCLDIR}/modulewcl/firstcut/02-detrend-{FRINGE_CASE}-bringback.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/03-create-scamp-cat.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/03b-split-scamp-ahead.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/04-run-scamp.wcl>>
##<<include {MYWCLDIR}/modulewcl/firstcut/04b-ingest-scamp-xml.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/04c-ingest-scamp-xml.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/05-update-scamp-headers.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/06-mkbleedmask.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/07-create-bkg-img.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/08-immask-indirect_write.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/09-create-psfex-cat.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/10-run-psfex.wcl>>
##<<include {MYWCLDIR}/modulewcl/firstcut/10b-ingest-psfex-xml.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/10c-ingest-psfex-xml.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/11-create-finalcut-catalog.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/12-ingest-se-objects.wcl>>
#<<include {MYWCLDIR}/modulewcl/firstcut/13-mkpng.wcl>>

# Using desftp and desftp10/desftp20
<archive>
    <prodbeta>
        host = desftp.cosmology.illinois.edu
        root_http = http://desftp.cosmology.illinois.edu/Prodbeta/archive
        input_transfer_semname_home  = desftp10
        output_transfer_semname_home = desftp20
    </prodbeta>
</archive>

# Database dependant definitions
submit_des_db_section = {DB_SECTION}    # submit section: db-desoper or db-destest
target_des_db_section = {DB_SECTION}    # target section: db-desoper or db-destest
home_archive          = {ARCHIVE_NAME}  # i.e. prodbeta or desar2home for destest/desoper
des_http_section      = {HTTP_SECTION}   # need to define in .desservices file (i.e file-http-prodbeta)

target_site = {TARGET_SITE} # ie. descmp4, iforge, fermigrid-sl6, etc.
reqnum      = {REQNUM}         # jira id - used as part of a unique identifier
jira_id     = DESOPS-{REQNUM}  # the parent id of the reqnum
label       = {LABELS}         # me-tests,,for-user-tests #strings to help identify runs

pipeline = firstcut        # used in desstat output 
pipeprod = {EUPS_PRODUCT}  # i.e. Y2Nstack       #eups stack name
pipever  = {EUPS_VERSION}  # 1.0.6+1, the eups stack version
campaign = {CAMPAIGN}      # Y2T for example
project  = {PROJECT}       # i.e ACT/FM/MCK as user tests can be done under your own project

basket         = ${nite} 
unitname       = ${camera}${expnum:8}
ops_run_dir    = ${project}/${pipeline}/${nite}-r${reqnum}/${unitname}/p${attnum:2}
submit_run_dir = /cluster_scratch/refact/submit/${home_archive}/${ops_run_dir}/

# Change this to PRODBETA.SE_OBJECT or PROD.SE_OBJECT depending on destest or desoper respectively
se_object_table = {SCHEMA}.SE_OBJECT 
save_run_vals   = nite, camera, band, expnum, jira_id 

camera = D         # Camera + expnum create unique criteria to find/name exposure file
band   = {BAND}    # We get this form EXPNUM
expnum = {EXPNUM}  # this is an input
nite   = {NITE}    # Get this from EXPNUM
photflagvar = 1    # needed for crosstalk code
#ccdnum = 1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,62
ccdnum = {CCDNUMS}

{CALIB_SECTION}

blocklist = se_{FRINGE_CASE}

<block>
    <se_{FRINGE_CASE}>
            # Case WITH catalog ingest
	    #modulelist = crosstalk-sci,detrend-{FRINGE_CASE},create-scamp-catalog,split-scamp-ahead,run-scamp,ingest-scamp-xml,update-scamp-headers,mkbleedmask,create-bkg-img,immask,create-psfex-catalog,run-psfex,ingest-psfex-xml,create-finalcut-catalog,ingest-se-objects,mkpng
            # Case WITHOUT catalog ingest
            #modulelist = crosstalk-sci,detrend-{FRINGE_CASE},create-scamp-catalog,split-scamp-ahead,run-scamp,ingest-scamp-xml,update-scamp-headers,mkbleedmask,create-bkg-img,immask,create-psfex-catalog,run-psfex,ingest-psfex-xml,create-finalcut-catalog,mkpng
            # Fast
            modulelist = crosstalk-sci,detrend-{FRINGE_CASE}
    </se_{FRINGE_CASE}>
</block>
