<<include ../supportwcl/felipe_cfg.des>> #user specified parameters

#science module definitions
<<include ../modulewcl/modnamepat.wcl>>
<<include ../modulewcl/firstcut/01-crosstalk-sci.wcl>>
<<include ../modulewcl/firstcut/02-detrend-fringe.wcl>>
<<include ../modulewcl/firstcut/03-create-scamp-cat.wcl>>
<<include ../modulewcl/firstcut/03b-split-scamp-ahead.wcl>>
<<include ../modulewcl/firstcut/04-run-scamp.wcl>>
<<include ../modulewcl/firstcut/04b-ingest-scamp-xml.wcl>>
<<include ../modulewcl/firstcut/05-update-scamp-headers.wcl>>
<<include ../modulewcl/firstcut/06-mkbleedmask.wcl>>
<<include ../modulewcl/firstcut/07-create-bkg-img.wcl>>
<<include ../modulewcl/firstcut/08-immask.wcl>>
<<include ../modulewcl/firstcut/09-create-psfex-cat.wcl>>
<<include ../modulewcl/firstcut/10-run-psfex.wcl>>
<<include ../modulewcl/firstcut/10b-ingest-psfex-xml.wcl>>
<<include ../modulewcl/firstcut/11-create-finalcut-catalog.wcl>>
<<include ../modulewcl/firstcut/12-ingest-se-objects.wcl>>
<<include ../modulewcl/firstcut/13-mkpng.wcl>>

target_site = fermigrid-sl6

reqnum = 1422 #jira id - used as part of a unique identifier
jira_id = DESOPS-873 # the parent id of the reqnum
label = se-fringe,for-user-tests #strings to help identify runs
basket = ${nite} #

pipeline = firstcut    # used in desstat output 
pipeprod = Y2Nstack    #eups stack name
pipever = 1.0.6+1 #eups stack version
campaign = Y2T

unitname = ${camera}${expnum:8}
ops_run_dir = ${project}/${pipeline}/${nite}-r${reqnum}/${unitname}/p${attnum:2}
submit_run_dir = /cluster_scratch/refact/submit/${home_archive}/${ops_run_dir}/

se_object_table = PRODBETA.SE_OBJECT
save_run_vals = nite, camera, band, expnum, jira_id 


camera = D         # Camera + expnum create unique criteria to find/name exposure file

expnum = 242742           
nite   = 20131010                  
band   = z

# This one fails
#band   = g
#expnum = 229683
#nite   = 20130901 

# This one works
#band   = z
#expnum = 155250
#nite   = 20121124

photflagvar = 1    # needed for crosstalk code
ccdnum = 1,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,62
#ccdnum = 1,3

# --- wcl configuration inputs for 20131010  ---- 
xtalkcoefffile  = DECam_20130606.xtalk
hupdatefile     = 20140709_DES_header_update.20140303
lintablenite    = 20130624
lintablefile    = lin_tbl_v0.4
bpmnite         = 20140901t0928
bpmreq          = 1190
bpmatt          = 1
fringecornite   = 20131115v1
illumcornite    = 20130830
pupilnite       = 20130830
photflatcornite = null
precalnite      = 20121207
precalrun       = r1415p02
scampupdatenite = 20131115
scampconfigfile = 20140709_default.scamp.20140423
etcnite         = 20140709
# ---------------------------------------------------

# #input calibration and config file definitions
# xtalkcoefffile = DECam_20130606.xtalk 
# hupdatefile = 20140709_DES_header_update.20140303 
# lintablefile = lin_tbl_v0.4 
# lintablenite = 20130624
# bpmnite = 20140901t0928
# bpmreq = 1190
# bpmatt = 1
# fringecornite = 20131115v1
# illumcornite = 20140807
# pupilnite = 20140807
# photflatcornite = null 
# precalnite = 20121124
# precalrun = r1414p01
# scampupdatenite = 20131115
# scampconfigfile = 20140709_default.scamp.20140423
# etcnite = 20140709

blocklist = se_fringe

<block>
    <se_fringe>
#	    modulelist = crosstalk-sci,detrend-fringe
	    modulelist = crosstalk-sci,detrend-fringe,create-scamp-catalog,split-scamp-ahead,run-scamp,ingest-scamp-xml,update-scamp-headers,mkbleedmask,create-bkg-img,immask,create-psfex-catalog,run-psfex,ingest-psfex-xml,create-finalcut-catalog,ingest-se-objects,mkpng
    </se_fringe>
</block>
